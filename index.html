<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI Transform Studio – Előtte–Utána (PayPal integráció)</title>
  <meta name="description" content="AI Before–After Transformations – Lakás • Kert • Autó • Stílus">
  <meta property="og:title" content="AI Transform Studio">
  <meta property="og:description" content="Előtte–Utána AI átalakítások 24 órán belül">
  <meta property="og:image" content="assets/logo-wide.png">
  <meta property="og:type" content="website">
  <link rel="icon" href="assets/logo-square.png">
  <link rel="stylesheet" href="assets/ats.css">
  
  <script src="https://www.paypal.com/sdk/js?client-id=AQsaQCLj0og2wsfMoDKAqxJieD2cgXwWq5cssAJCJbO2KoYE8LGHCREyR4vMzMfKZK68qw6EY7IAxMYF&currency=EUR"></script>
  
  <style>body{margin:0;background:#fafafa}</style>
</head>
<body>
  <header class="ats-nav">
    <div class="wrap">
      <img src="assets/logo-square.png" alt="logo" class="nav-logo">
      <div class="brand">AI Transform Studio</div>
      <a class="nav-cta" id="nav-buy" href="#">Vásárlás</a>
    </div>
  </header>

  <main>
    <section id="ai-transform-studio" class="ats-container">
      <div class="ats-hero">
        <img src="assets/logo-wide.png" alt="AI Transform Studio" class="ats-logo" />
        <h1>AI Before–After Transformations</h1>
        <p class="ats-sub">Lakás • Kert • Autó • Stílus – Előtte–Utána látványtervek 24 órán belül</p>
        <div class="ats-cta">
          <a id="ats-buy-basic" class="btn">Alap – €3.99</a>
          <a id="ats-buy-pro" class="btn btn-outline">Prémium – €14.99</a>
          <a id="ats-buy-extra" class="btn btn-dark">Extra – €29.99</a>
        </div>
        
        <div id="paypal-container" class="w-full max-w-sm mx-auto mt-6"></div>

      </div>

      <div class="ats-grid">
        
<div class="ats-card">
  <div class="ats-slider" data-before="assets/demo_before_1.jpg" data-after="assets/demo_after_1.jpg">
    <img src="assets/demo_before_1.jpg" class="ats-img" alt="Before 1">
    <div class="ats-overlay"><div class="ats-handle"></div></div>
  </div>
  <div class="ats-caption">Modern konyha – Előtte/Utána</div>
</div>


<div class="ats-card">
  <div class="ats-slider" data-before="assets/demo_before_2.jpg" data-after="assets/demo_after_2.jpg">
    <img src="assets/demo_before_2.jpg" class="ats-img" alt="Before 2">
    <div class="ats-overlay"><div class="ats-handle"></div></div>
  </div>
  <div class="ats-caption">Skandináv nappali – Előtte/Utána</div>
</div>


<div class="ats-card">
  <div class="ats-slider" data-before="assets/demo_before_3.jpg" data-after="assets/demo_after_3.jpg">
    <img src="assets/demo_before_3.jpg" class="ats-img" alt="Before 3">
    <div class="ats-overlay"><div class="ats-handle"></div></div>
  </div>
  <div class="ats-caption">Luxus fürdő – Előtte/Utána</div>
</div>


<div class="ats-card">
  <div class="ats-slider" data-before="assets/demo_before_4.jpg" data-after="assets/demo_after_4.jpg">
    <img src="assets/demo_before_4.jpg" class="ats-img" alt="Before 4">
    <div class="ats-overlay"><div class="ats-handle"></div></div>
  </div>
  <div class="ats-caption">Zöld udvar – Előtte/Utána</div>
</div>


<div class="ats-card">
  <div class="ats-slider" data-before="assets/demo_before_5.jpg" data-after="assets/demo_after_5.jpg">
    <img src="assets/demo_before_5.jpg" class="ats-img" alt="Before 5">
    <div class="ats-overlay"><div class="ats-handle"></div></div>
  </div>
  <div class="ats-caption">Pihenőkert terasz – Előtte/Utána</div>
</div>

      </div>

      <div class="ats-info">
        <h2>Hogyan működik?</h2>
        <ol>
          <li>Válaszd ki a csomagot, és fizess a felugró PayPal ablakban.</li>
          <li>Sikeres fizetés után automatikusan átirányítunk a fotófeltöltő űrlapra (Google Form).</li>
          <li>24 órán belül elkészítjük az Előtte–Utána képeket és e-mailben küldjük.</li>
        </ol>
      </div>
    </section>
  </main>

  <footer class="ats-footer">
    <div class="wrap">© <span id="y"></span> AI Transform Studio</div>
  </footer>

  <script>
    (async function() {
        let cfg = { brand: "AI Transform Studio", form_url: "", prices: { EUR: {}, USD: {} } };
        try {
            const r = await fetch('assets/ats-config.json', { cache: 'no-store' });
            if (r.ok) { cfg = await r.json(); }
        } catch (e) {
            console.error("Config file could not be loaded.", e);
        }

        // --- PayPal Gombok Kezelése ---
        function renderPayPalButtons(packageKey) {
            const prices = cfg.prices.EUR; // Vagy USD
            const price = prices[packageKey];
            const description = `AI Transform Studio - ${packageKey.charAt(0).toUpperCase() + packageKey.slice(1)} Csomag`;
            const container = document.getElementById('paypal-container');
            
            if(!price) {
                alert('Hiba: A csomag ára nincs beállítva a config fájlban.');
                return;
            }

            container.innerHTML = '';
            
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            description: description,
                            amount: {
                                currency_code: 'EUR', // Vagy USD
                                value: price
                            }
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        alert('Sikeres fizetés! Köszönjük. Most átirányítunk a fotófeltöltő oldalra.');
                        if (cfg.form_url && cfg.form_url.startsWith('http')) {
                            window.location.href = cfg.form_url;
                        } else {
                            alert('Hiba: A fotófeltöltő űrlap (form_url) nincs beállítva az assets/ats-config.json fájlban.');
                        }
                    });
                },
                onError: function(err) {
                    console.error('PayPal fizetési hiba:', err);
                    alert('Hiba történt a fizetés során. Kérjük, próbálja újra.');
                }
            }).render('#paypal-container');
        }

        // A vásárlás gombokhoz eseményfigyelők csatolása
        document.getElementById('ats-buy-basic')?.addEventListener('click', (e) => { e.preventDefault(); renderPayPalButtons('basic'); });
        document.getElementById('ats-buy-pro')?.addEventListener('click', (e) => { e.preventDefault(); renderPayPalButtons('pro'); });
        document.getElementById('ats-buy-extra')?.addEventListener('click', (e) => { e.preventDefault(); renderPayPalButtons('extra'); });
        
        // A felső "Vásárlás" gomb a prémium csomagra mutat
        document.getElementById('nav-buy')?.addEventListener('click', (e) => { e.preventDefault(); renderPayPalButtons('pro'); });


        // --- Az Előtte-Utána Csúszka Inicializálása ---
        const initSlider = (slider) => {
            const afterSrc = slider.getAttribute('data-after');
            const overlay = slider.querySelector('.ats-overlay');
            if (!overlay) return;

            const afterImg = new Image();
            afterImg.src = afterSrc;
            afterImg.alt = 'After';
            overlay.insertBefore(afterImg, overlay.firstChild);

            const handle = slider.querySelector('.ats-handle');
            if (!handle) return;

            let active = false;
            const setPos = (x) => {
                const r = slider.getBoundingClientRect();
                let t = (x - r.left) / r.width;
                t = Math.max(0, Math.min(1, t));
                overlay.style.width = (t * 100) + '%';
                handle.style.left = (t * 100) + '%';
            };

            slider.addEventListener('pointerdown', e => { active = true; setPos(e.clientX); });
            window.addEventListener('pointerup', () => active = false);
            window.addEventListener('pointermove', e => { if (active) setPos(e.clientX); });

            const r = slider.getBoundingClientRect();
            setPos(r.left + r.width / 2);
        };
        document.querySelectorAll('.ats-slider').forEach(initSlider);

        // --- Évszám beállítása a láblécben ---
        document.getElementById('y').textContent=new Date().getFullYear();

    })();
  </script>
</body>
</html>
