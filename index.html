<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI Transform Studio – Előtte–Utána (PayPal integráció)</title>
  <meta name="description" content="AI Before–After Transformations – Lakás • Kert • Autó • Stílus">
  <meta property="og:title" content="AI Transform Studio">
  <meta property="og:description" content="Előtte–Utána AI átalakítások 24 órán belül">
  <meta property="og:type" content="website">
  <link rel="icon" href="assets/logo-square.png">
  <link rel="stylesheet" href="assets/ats.css">
  <script src="https://www.paypal.com/sdk/js?client-id=AQsaQCLj0og2wsfMoDKAqxJieD2cgXwWq5cssAJCJbO2KoYE8LGHCREyR4vMzMfKZK68qw6EY7IAxMYF&currency=EUR"></script>

  <style>
    body{margin:0;background:#fafafa}

    /* FIX: kártyák 16:9 arányban, képek szépen vágva */
    .ats-card .ats-slider{aspect-ratio:16/9;height:auto;overflow:hidden;position:relative}
    .ats-card .ats-slider img,
    .ats-card .ats-slider .ats-overlay img{width:100%;height:100%;object-fit:cover;display:block}

    /* Képszám jelzés a gombokon + rövid sor alatta */
    .pkg-note{opacity:.85;margin-left:4px;font-weight:500}
    .ats-cta-notes{margin-top:6px;font-size:14px;color:#666;text-align:center}
  </style>
</head>
<body>
  <header class="ats-nav">
    <div class="wrap">
      <img src="assets/logo-square.png" alt="logo" class="nav-logo">
      <div class="brand">AI Transform Studio</div>
      <a class="nav-cta" id="nav-buy" href="#">Vásárlás</a>
    </div>
  </header>

  <main>
    <section id="ai-transform-studio" class="ats-container">
      <div class="ats-hero">
        <img src="assets/logo-wide.png" alt="AI Transform Studio" class="ats-logo" />
        <h1>AI Before–After Transformations</h1>
        <p class="ats-sub">Lakás • Kert • Autó • Stílus – Előtte–Utána látványtervek 24 órán belül</p>

        <div class="ats-cta">
          <a id="ats-buy-basic" class="btn"><strong>Alap</strong> – €3.99 <span class="pkg-note">(1 kép)</span></a>
          <a id="ats-buy-pro" class="btn btn-outline"><strong>Prémium</strong> – €14.99 <span class="pkg-note">(5 kép)</span></a>
          <a id="ats-buy-extra" class="btn btn-dark"><strong>Extra</strong> – €29.99 <span class="pkg-note">(10 kép + 2 variáció/kép)</span></a>
        </div>
        <div id="ats-cta-notes" class="ats-cta-notes">Alap: (1 kép) • Prémium: (5 kép) • Extra: (10 kép + 2 variáció/kép)</div>

        <div id="paypal-container" class="w-full max-w-xs mx-auto mt-6"></div>
      </div>

      <div class="ats-grid">
        <div class="ats-card">
          <div class="ats-slider"
               data-before="assets/assetspool_before.jpg"
               data-after="assets/assetspool_after.jpg">
            <img src="assets/assetspool_before.jpg" class="ats-img" alt="Kert medencével - Előtte">
            <div class="ats-overlay"><div class="ats-handle"></div></div>
          </div>
          <div class="ats-caption">Kert medencével – Előtte/Utána</div>
        </div>

        <div class="ats-card">
          <div class="ats-slider" data-before="assets/kert_before.jpg" data-after="assets/kert_after.jpg">
            <img src="assets/kert_before.jpg" class="ats-img" alt="Mediterrán kert előtte">
            <div class="ats-overlay"><div class="ats-handle"></div></div>
          </div>
          <div class="ats-caption">Mediterrán kert – Előtte/Utána</div>
        </div>

        <div class="ats-card">
          <div class="ats-slider" data-before="assets/haz_before.jpg" data-after="assets/haz_after.jpg">
            <img src="assets/haz_before.jpg" class="ats-img" alt="Házfelújítás előtte">
            <div class="ats-overlay"><div class="ats-handle"></div></div>
          </div>
          <div class="ats-caption">Családi ház felújítás – Előtte/Utána</div>
        </div>

        <div class="ats-card">
          <div class="ats-slider" data-before="assets/hazepites_before.jpg" data-after="assets/hazepites_after.jpg">
            <img src="assets/hazepites_before.jpg" class="ats-img" alt="Házépítés előtte">
            <div class="ats-overlay"><div class="ats-handle"></div></div>
          </div>
          <div class="ats-caption">Házépítés látványterv – Előtte/Utána</div>
        </div>

        <div class="ats-card">
          <div class="ats-slider" data-before="assets/hazepites2_before.jpg" data-after="assets/hazepites2_after.jpg">
            <img src="assets/hazepites2_before.jpg" class="ats-img" alt="Új ház építés alatt">
            <div class="ats-overlay"><div class="ats-handle"></div></div>
          </div>
          <div class="ats-caption">Modern ház építése – Előtte/Utána</div>
        </div>
      </div>

      <div class="ats-info">
        <h2>Hogyan működik?</h2>
        <ol>
          <li>Válaszd ki a csomagot, és fizess a felugró PayPal ablakban.</li>
          <li>Sikeres fizetés után automatikusan átirányítunk a fotófeltöltő űrlapra (Google Form).</li>
          <li>24 órán belül elkészítjük az Előtte–Utána képeket és e-mailben küldjük.</li>
        </ol>
      </div>
    </section>
  </main>

  <footer class="ats-footer">
    <div class="wrap">© <span id="y"></span> AI Transform Studio</div>
  </footer>

  <script>
    (async function() {
      const DEFAULT_PRICES = {basic:"3.99", pro:"14.99", extra:"29.99"};
      let cfg = { brand: "AI Transform Studio", form_url: "", prices: {EUR: DEFAULT_PRICES} };
      try {
        const r = await fetch('assets/ats-config.json', { cache: 'no-store' });
        if (r.ok) cfg = Object.assign(cfg, await r.json());
      } catch(e) {}

      function renderPayPalButtons(packageKey) {
        const prices = (cfg && cfg.prices && cfg.prices.EUR) ? cfg.prices.EUR : DEFAULT_PRICES;
        const PACK_INFO = {
          basic:  {label:'Alap',    note:'(1 kép)'},
          pro:    {label:'Prémium', note:'(5 kép)'},
          extra:  {label:'Extra',   note:'(10 kép + 2 variáció/kép)'}
        };
        const price = prices[packageKey];
        const description = `AI Transform Studio – ${PACK_INFO[packageKey].label} ${PACK_INFO[packageKey].note}`;
        const container = document.getElementById('paypal-container');
        if(!price){ alert('Hiba: A csomag ára nincs beállítva.'); return; }
        container.innerHTML = '';
        paypal.Buttons({
          style: { layout:'vertical', color:'gold', shape:'rect', label:'paypal', height:40 },
          createOrder: (data, actions) => actions.order.create({
            purchase_units: [{ description, amount: { currency_code:'EUR', value: Number(price).toFixed(2) } }]
          }),
          onApprove: (data, actions) => actions.order.capture().then(() => {
            alert('Sikeres fizetés! Átirányítunk a fotófeltöltő űrlapra.');
            if (cfg.form_url && cfg.form_url.startsWith('http')) window.location.href = cfg.form_url;
            else alert('Hiba: a form_url nincs beállítva az assets/ats-config.json fájlban.');
          }),
          onError: (err) => { console.error('PayPal hiba:', err); alert('Hiba történt a fizetés során. Próbáld újra.'); }
        }).render('#paypal-container');
      }
      document.getElementById('ats-buy-basic')?.addEventListener('click', (e) => { e.preventDefault(); renderPayPalButtons('basic'); });
      document.getElementById('ats-buy-pro')?.addEventListener('click',   (e) => { e.preventDefault(); renderPayPalButtons('pro');   });
      document.getElementById('ats-buy-extra')?.addEventListener('click', (e) => { e.preventDefault(); renderPayPalButtons('extra'); });
      document.getElementById('nav-buy')?.addEventListener('click',       (e) => { e.preventDefault(); renderPayPalButtons('pro');   });

      const initSlider = (slider) => {
        const afterSrc = slider.getAttribute('data-after');
        const overlay = slider.querySelector('.ats-overlay'); if (!overlay) return;
        const afterImg = new Image(); afterImg.src = afterSrc; afterImg.alt = 'After';
        overlay.insertBefore(afterImg, overlay.firstChild);
        const handle = slider.querySelector('.ats-handle'); if (!handle) return;
        let active = false;
        const setPos = (x) => {
          const r = slider.getBoundingClientRect();
          let t = (x - r.left) / r.width;
          t = Math.max(0, Math.min(1, t));
          overlay.style.width = (t * 100) + '%';
          handle.style.left = (t * 100) + '%';
        };
        slider.addEventListener('pointerdown', e => { active = true; setPos(e.clientX); });
        window.addEventListener('pointerup', () => active = false);
        window.addEventListener('pointermove', e => { if (active) setPos(e.clientX); });
        const r = slider.getBoundingClientRect();
        setPos(r.left + r.width / 2);
      };
      document.querySelectorAll('.ats-slider').forEach(initSlider);

      document.getElementById('y').textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>
